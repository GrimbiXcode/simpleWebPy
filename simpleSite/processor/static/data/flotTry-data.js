//Flot Line Chart
$(document).ready(function() {

    var offset = 0;
    plot();

    function plot() {
        var sin = [],
            cos = [];
        for (var i = 0; i < 12; i += 0.2) {
            sin.push([i, Math.sin(i + offset)]);
            cos.push([i, Math.cos(i + offset)]);
        }

        var options = {
            series: {
                lines: {
                    show: true
                },
                points: {
                    show: true
                }
            },
            grid: {
                hoverable: true //IMPORTANT! this is needed for tooltip to work
            },
            yaxis: {
                min: -1.2,
                max: 1.2
            },
            tooltip: true,
            tooltipOpts: {
                content: "'%s' of %x.1 is %y.4",
                shifts: {
                    x: -60,
                    y: 25
                }
            }
        };

        var plotObj = $.plot($("#flot-line-chart"), [{
                data: sin,
                label: "sin(x)"
            }, {
                data: cos,
                label: "cos(x)"
            }],
            options);
    }
});

//Flot Pie Chart
$(function() {

    var data = [{
        label: "Series 0",
        data: 1
    }, {
        label: "Series 1",
        data: 3
    }, {
        label: "Series 2",
        data: 9
    }, {
        label: "Series 3",
        data: 20
    }];

    var plotObj = $.plot($("#flot-pie-chart"), data, {
        series: {
            pie: {
                show: true
            }
        },
        grid: {
            hoverable: true
        },
        tooltip: true,
        tooltipOpts: {
            content: "%p.0%, %s", // show percentages, rounding to 2 decimal places
            shifts: {
                x: 20,
                y: 0
            },
            defaultTheme: false
        }
    });

});

//Flot Multiple Axes Line Chart
$(function() {
    var EKG_Value = [   
    [1,0.001366867],
    [2,0.001366867],
    [3,0.001366867],
    [4,0.001366867],
    [5,0.001366867],
    [6,0.001366867],
    [7,0.001640241],
    [8,0.001913614],
    [9,0.002186987],
    [10,0.002460361],
    [11,0.002733734],
    [12,0.003007108],
    [13,0.003280481],
    [14,0.003553855],
    [15,0.003827228],
    [16,0.004100601],
    [17,0.004373975],
    [18,0.004647348],
    [19,0.004920722],
    [20,0.005194095],
    [21,0.005467469],
    [22,0.005740842],
    [23,0.006014215],
    [24,0.006287589],
    [25,0.006560962],
    [26,0.006834336],
    [27,0.007107709],
    [28,0.008190848],
    [29,0.010083752],
    [30,0.012786421],
    [31,0.016298855],
    [32,0.020621055],
    [33,0.02575302],
    [34,0.03169475],
    [35,0.038446245],
    [36,0.046007505],
    [37,0.054378531],
    [38,0.063559322],
    [39,0.072740113],
    [40,0.081920904],
    [41,0.091101695],
    [42,0.100282486],
    [43,0.109463277],
    [44,0.118644068],
    [45,0.127824859],
    [46,0.13700565],
    [47,0.146186441],
    [48,0.155367232],
    [49,0.164548023],
    [50,0.173728814],
    [51,0.182909605],
    [52,0.192090395],
    [53,0.201271186],
    [54,0.210451977],
    [55,0.219632768],
    [56,0.228813559],
    [57,0.23799435],
    [58,0.247175141],
    [59,0.256355932],
    [60,0.265536723],
    [61,0.274717514],
    [62,0.283898305],
    [63,0.293079096],
    [64,0.300590652],
    [65,0.306432974],
    [66,0.310606061],
    [67,0.313109913],
    [68,0.31394453],
    [69,0.313109913],
    [70,0.310606061],
    [71,0.306432974],
    [72,0.300590652],
    [73,0.293079096],
    [74,0.283898305],
    [75,0.274717514],
    [76,0.265536723],
    [77,0.256355932],
    [78,0.247175141],
    [79,0.23799435],
    [80,0.228813559],
    [81,0.219632768],
    [82,0.210451977],
    [83,0.201271186],
    [84,0.192090395],
    [85,0.182909605],
    [86,0.173728814],
    [87,0.164548023],
    [88,0.155367232],
    [89,0.146186441],
    [90,0.13700565],
    [91,0.127824859],
    [92,0.118644068],
    [93,0.109463277],
    [94,0.100282486],
    [95,0.091101695],
    [96,0.081920904],
    [97,0.072740113],
    [98,0.063559322],
    [99,0.054378531],
    [100,0.046015609],
    [101,0.038470557],
    [102,0.031743373],
    [103,0.025834059],
    [104,0.020742614],
    [105,0.016469038],
    [106,0.013013332],
    [107,0.010375494],
    [108,0.008555526],
    [109,0.007553427],
    [110,0.007369197],
    [111,0.007184967],
    [112,0.007000737],
    [113,0.006816507],
    [114,0.006632277],
    [115,0.006448047],
    [116,0.006263817],
    [117,0.006079587],
    [118,0.005895357],
    [119,0.005711127],
    [120,0.005526898],
    [121,0.005342668],
    [122,0.005158438],
    [123,0.004974208],
    [124,0.004789978],
    [125,0.004605748],
    [126,0.004421518],
    [127,0.004237288],
    [128,0.004053058],
    [129,0.003868828],
    [130,0.003684598],
    [131,0.003500368],
    [132,0.003316139],
    [133,0.003131909],
    [134,0.002947679],
    [135,0.002763449],
    [136,0.002579219],
    [137,0.002394989],
    [138,0.002210759],
    [139,0.002026529],
    [140,0.001842299],
    [141,0.001658069],
    [142,0.001473839],
    [143,0.001289609],
    [144,0.00110538],
    [145,0.00092115],
    [146,-0.001627618],
    [147,-0.006540923],
    [148,-0.013818766],
    [149,-0.023461147],
    [150,-0.035468066],
    [151,-0.049839522],
    [152,-0.066575516],
    [153,-0.085676048],
    [154,-0.107141117],
    [155,-0.130970724],
    [156,-0.157164869],
    [157,-0.176293599],
    [158,-0.188356913],
    [159,-0.193354812],
    [160,-0.191287295],
    [161,-0.182154363],
    [162,-0.165956016],
    [163,-0.142692254],
    [164,-0.112363076],
    [165,-0.074968483],
    [166,-0.030508475],
    [167,0.021016949],
    [168,0.072542373],
    [169,0.124067797],
    [170,0.17559322],
    [171,0.227118644],
    [172,0.278644068],
    [173,0.330169492],
    [174,0.381694915],
    [175,0.433220339],
    [176,0.484745763],
    [177,0.536271186],
    [178,0.58779661],
    [179,0.639322034],
    [180,0.690847458],
    [181,0.742372881],
    [182,0.782526965],
    [183,0.811309707],
    [184,0.828721109],
    [185,0.834761171],
    [186,0.829429892],
    [187,0.812727273],
    [188,0.784653313],
    [189,0.745208012],
    [190,0.694391371],
    [191,0.63220339],
    [192,0.558644068],
    [193,0.485084746],
    [194,0.411525424],
    [195,0.337966102],
    [196,0.26440678],
    [197,0.190847458],
    [198,0.117288136],
    [199,0.043728814],
    [200,-0.029830508],
    [201,-0.103389831],
    [202,-0.176949153],
    [203,-0.250508475],
    [204,-0.324067797],
    [205,-0.397627119],
    [206,-0.471186441],
    [207,-0.531702619],
    [208,-0.579175655],
    [209,-0.613605547],
    [210,-0.634992296],
    [211,-0.643335901],
    [212,-0.638636364],
    [213,-0.620893683],
    [214,-0.590107858],
    [215,-0.546278891],
    [216,-0.48940678],
    [217,-0.419491525],
    [218,-0.349576271],
    [219,-0.286000017],
    [220,-0.228762763],
    [221,-0.177864508],
    [222,-0.133305254],
    [223,-0.095085],
    [224,-0.063203745],
    [225,-0.037661491],
    [226,-0.018458237],
    [227,-0.005593982],
    [228,0.000931272],
    [229,0.001117527],
    [230,0.001303781],
    [231,0.001490035],
    [232,0.00167629],
    [233,0.001862544],
    [234,0.002048799],
    [235,0.002235053],
    [236,0.002421308],
    [237,0.002607562],
    [238,0.002793816],
    [239,0.002980071],
    [240,0.003166325],
    [241,0.00335258],
    [242,0.003538834],
    [243,0.003725088],
    [244,0.003911343],
    [245,0.004097597],
    [246,0.004283852],
    [247,0.004470106],
    [248,0.004656361],
    [249,0.004842615],
    [250,0.005028869],
    [251,0.005215124],
    [252,0.005401378],
    [253,0.005587633],
    [254,0.005773887],
    [255,0.005960142],
    [256,0.006146396],
    [257,0.00633265],
    [258,0.006518905],
    [259,0.006705159],
    [260,0.006891414],
    [261,0.007077668],
    [262,0.007263923],
    [263,0.007450177],
    [264,0.007636431],
    [265,0.007822686],
    [266,0.00800894],
    [267,0.008195195],
    [268,0.008381449],
    [269,0.008567703],
    [270,0.008753958],
    [271,0.008940212],
    [272,0.009126467],
    [273,0.009312721],
    [274,0.009498976],
    [275,0.00968523],
    [276,0.009871484],
    [277,0.010057739],
    [278,0.010243993],
    [279,0.010430248],
    [280,0.010616502],
    [281,0.010802757],
    [282,0.010989011],
    [283,0.011175265],
    [284,0.01136152],
    [285,0.011547774],
    [286,0.011734029],
    [287,0.011920283],
    [288,0.012106538],
    [289,0.012292792],
    [290,0.012479046],
    [291,0.012665301],
    [292,0.012851555],
    [293,0.01303781],
    [294,0.013224064],
    [295,0.013410318],
    [296,0.013596573],
    [297,0.013782827],
    [298,0.013969082],
    [299,0.014155336],
    [300,0.014341591],
    [301,0.014527845],
    [302,0.014714099],
    [303,0.014900354],
    [304,0.015086608],
    [305,0.015272863],
    [306,0.015459117],
    [307,0.015645372],
    [308,0.015831626],
    [309,0.01601788],
    [310,0.016593811],
    [311,0.017559418],
    [312,0.018914701],
    [313,0.02065966],
    [314,0.022794296],
    [315,0.025318608],
    [316,0.028232596],
    [317,0.03153626],
    [318,0.035229601],
    [319,0.039312618],
    [320,0.043785311],
    [321,0.048258004],
    [322,0.052730697],
    [323,0.05720339],
    [324,0.061676083],
    [325,0.066148776],
    [326,0.070621469],
    [327,0.075094162],
    [328,0.079566855],
    [329,0.084039548],
    [330,0.088512241],
    [331,0.092984934],
    [332,0.097457627],
    [333,0.10193032],
    [334,0.106403013],
    [335,0.110875706],
    [336,0.115348399],
    [337,0.119821092],
    [338,0.124293785],
    [339,0.128766478],
    [340,0.133239171],
    [341,0.137711864],
    [342,0.142184557],
    [343,0.14665725],
    [344,0.151129944],
    [345,0.155602637],
    [346,0.159262113],
    [347,0.162108372],
    [348,0.164141414],
    [349,0.16536124],
    [350,0.165767848],
    [351,0.16536124],
    [352,0.164141414],
    [353,0.162108372],
    [354,0.159262113],
    [355,0.155602637],
    [356,0.151129944],
    [357,0.14665725],
    [358,0.142184557],
    [359,0.137711864],
    [360,0.133239171],
    [361,0.128766478],
    [362,0.124293785],
    [363,0.119821092],
    [364,0.115348399],
    [365,0.110875706],
    [366,0.106403013],
    [367,0.10193032],
    [368,0.097457627],
    [369,0.092984934],
    [370,0.088512241],
    [371,0.084039548],
    [372,0.079566855],
    [373,0.075094162],
    [374,0.070621469],
    [375,0.066148776],
    [376,0.061676083],
    [377,0.05720339],
    [378,0.052730697],
    [379,0.048258004],
    [380,0.043785311],
    [381,0.039312618],
    [382,0.03517316],
    [383,0.031366938],
    [384,0.027893952],
    [385,0.024754201],
    [386,0.021947685],
    [387,0.019474405],
    [388,0.017334361],
    [389,0.015527552],
    [390,0.014053978],
    [391,0.01291364],
    [392,0.012106538],
    [393,0.011299435],
    [394,0.010492333],
    [395,0.00968523],
    [396,0.008878128],
    [397,0.008071025],
    [398,0.007263923],
    [399,0.00645682],
    [400,0.005649718],
    [401,0.004842615],
    [402,0.004035513],
    [403,0.003301783],
    [404,0.002641426],
    [405,0.002054443],
    [406,0.001540832],
    [407,0.001100594],
    [408,0.00073373],
    [409,0.000440238],
    [410,0.000220119],
    [411,7.34E-05],
    [412,0],
    [413,0],
    [414,0],
    [415,0],
    [416,0],
    [417,0],
    [418,0],
    [419,0],
    [420,0],
    [421,0],
    [422,0],
    [423,0],
    [424,0],
    [425,0],
    [426,0],
    [427,0],
    [428,0],
    [429,0],
    [430,0],
    [431,0],
    [432,0],
    [433,0],
    [434,0],
    [435,0],
    [436,0],
    [437,0],
    [438,0],
    [439,0],
    [440,0],
    [441,0],
    [442,0],
    [443,0],
    [444,0],
    [445,0],
    [446,0],
    [447,0],
    [448,0],
    [449,0],
    [450,0],
    [451,0],
    [452,0],
    [453,0],
    [454,0],
    [455,0],
    [456,0],
    [457,0],
    [458,0],
    [459,0],
    [460,0],
    [461,0],
    [462,0],
    [463,0],
    [464,0],
    [465,0],
    [466,0],
    [467,0],
    [468,0],
    [469,0],
    [470,0],
    [471,0],
    [472,0],
    [473,0],
    [474,0],
    [475,0],
    [476,0],
    [477,0],
    [478,0],
    [479,0],
    [480,0],
    [481,0],
    [482,0],
    [483,0],
    [484,0],
    [485,0],
    [486,0],
    [487,0],
    [488,0],
    [489,0],
    [490,0],
    [491,0],
    [492,0],
    [493,0],
    [494,0],
    [495,0],
    [496,0],
    [497,0],
    [498,0],
    [499,0],
    [500,0]
    ];

    function euroFormatter(v, axis) {
        return v.toFixed(axis.tickDecimals) + "mV";
    }

    function doPlot(position) {
        $.plot($("#flot-line-chart-multi"), [{
            data: EKG_Value,
            label: "EKG_Value(mV)"
        }], {
            xaxes: [{
                min: 0
            }],
            yaxes: [{
                min: -1,
                max: 2
            }, {
                // align if we are to the right
                alignTicksWithAxis: position == "right" ? 1 : null,
                position: position,
                tickFormatter: euroFormatter
            }],
            legend: {
                position: 'sw'
            },
            grid: {
                hoverable: true //IMPORTANT! this is needed for tooltip to work
            },
            tooltip: true,
            tooltipOpts: {
                content: "%s for %x was %y",

                onHover: function(flotItem, $tooltipEl) {
                    // console.log(flotItem, $tooltipEl);
                }
            }

        });
    }

    doPlot("right");

    $("button").click(function() {
        doPlot($(this).text());
    });
});

//Flot Moving Line Chart

$(function() {

    var container = $("#flot-line-chart-moving");

    // Determine how many data points to keep based on the placeholder's initial size;
    // this gives us a nice high-res plot while avoiding more than one point per pixel.

    var maximum = container.outerWidth() / 2 || 300;

    //

    var data = [];

    function getRandomData() {

        if (data.length) {
            data = data.slice(1);
        }

        while (data.length < maximum) {
            var previous = data.length ? data[data.length - 1] : 50;
            var y = previous + Math.random() * 10 - 5;
            data.push(y < 0 ? 0 : y > 100 ? 100 : y);
        }

        // zip the generated y values with the x values

        var res = [];
        for (var i = 0; i < data.length; ++i) {
            res.push([i, data[i]])
        }

        return res;
    }

    //

    series = [{
        data: getRandomData(),
        lines: {
            fill: true
        }
    }];

    //

    var plot = $.plot(container, series, {
        grid: {
            borderWidth: 1,
            minBorderMargin: 20,
            labelMargin: 10,
            backgroundColor: {
                colors: ["#fff", "#e4f4f4"]
            },
            margin: {
                top: 8,
                bottom: 20,
                left: 20
            },
            markings: function(axes) {
                var markings = [];
                var xaxis = axes.xaxis;
                for (var x = Math.floor(xaxis.min); x < xaxis.max; x += xaxis.tickSize * 2) {
                    markings.push({
                        xaxis: {
                            from: x,
                            to: x + xaxis.tickSize
                        },
                        color: "rgba(232, 232, 255, 0.2)"
                    });
                }
                return markings;
            }
        },
        xaxis: {
            tickFormatter: function() {
                return "";
            }
        },
        yaxis: {
            min: 0,
            max: 110
        },
        legend: {
            show: true
        }
    });

    // Update the random dataset at 25FPS for a smoothly-animating chart

    setInterval(function updateRandom() {
        series[0].data = getRandomData();
        plot.setData(series);
        plot.draw();
    }, 40);

});

//Flot Bar Chart

$(function() {

    var barOptions = {
        series: {
            bars: {
                show: true,
                barWidth: 43200000
            }
        },
        xaxis: {
            mode: "time",
            timeformat: "%m/%d",
            minTickSize: [1, "day"]
        },
        grid: {
            hoverable: true
        },
        legend: {
            show: false
        },
        tooltip: true,
        tooltipOpts: {
            content: "x: %x, y: %y"
        }
    };
    var barData = {
        label: "bar",
        data: [
            [1354521600000, 1000],
            [1355040000000, 2000],
            [1355223600000, 3000],
            [1355306400000, 4000],
            [1355487300000, 5000],
            [1355571900000, 6000]
        ]
    };
    $.plot($("#flot-bar-chart"), [barData], barOptions);

});
